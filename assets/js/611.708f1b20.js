(window.webpackJsonp=window.webpackJsonp||[]).push([[611],{1030:function(_,v,t){"use strict";t.r(v);var a=t(14),s=Object(a.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"_1-历史遗留问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-历史遗留问题"}},[_._v("#")]),_._v(" 1.历史遗留问题")]),_._v(" "),t("p",[_._v("昨天下午有一个经纪商的项目的线上bug，获取服务费的部分有bug，服务费可能会取错。")]),_._v(" "),t("p",[_._v("和金钱相关，线上bug，这个bug应该是要紧急上线的。")]),_._v(" "),t("p",[_._v("我一看代码，质量很差，需要大改，时间很紧，测试时间很短。")]),_._v(" "),t("p",[_._v("于是，延后了一天。")]),_._v(" "),t("h2",{attrs:{id:"_2-改bug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-改bug"}},[_._v("#")]),_._v(" 2.改bug")]),_._v(" "),t("p",[_._v("延后一天后，我再看代码，心情复杂。由于历史问题，表设计并不好，并且接口设计也有问题。")]),_._v(" "),t("p",[_._v("如果修改表接口，可能需要改好多接口，有风险。")]),_._v(" "),t("p",[_._v("如果改接口。可以通过改Sql或者改代码。")]),_._v(" "),t("h3",{attrs:{id:"_2-1改sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1改sql"}},[_._v("#")]),_._v(" 2.1改Sql")]),_._v(" "),t("p",[_._v("改Sql其实是性能最优的，但是这样不稳妥。")]),_._v(" "),t("p",[_._v("从表设计到接口设计就是有问题的，这个时候改Sql,很有可能会有隐藏Bug。")]),_._v(" "),t("p",[_._v("并且这个接口已经运行好几年了，改了表和Sql，出问题是要背黑锅的。")]),_._v(" "),t("p",[_._v("思考了一个多小时，最终这个方案被pass了。")]),_._v(" "),t("h3",{attrs:{id:"_2-2改代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2改代码"}},[_._v("#")]),_._v(" 2.2改代码")]),_._v(" "),t("p",[_._v("改代码也有问题，由于表结构当初的设计问题，符合条件的服务费可能有多条，之前的代码采用了for循环，符合条件就返回，可能会导致取不到正确的服务费。")]),_._v(" "),t("p",[_._v("选择改Sql是最优解，使用Sql可以做到只返回一条记录，风险太大，使用代码，就需要做筛选。")]),_._v(" "),t("p",[_._v("于是我加入了权重的概念，权重从-1到16.")]),_._v(" "),t("p",[_._v("然后遍历，加入两个临时变量，保存权重和服务费。遍历一遍，取最高权重和服务费。")]),_._v(" "),t("p",[_._v("这样改动的代码最少。")]),_._v(" "),t("h2",{attrs:{id:"_3-测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-测试"}},[_._v("#")]),_._v(" 3.测试")]),_._v(" "),t("p",[_._v("测试的时候又出现了问题，没有测试人员愿意测试，都在推脱。")]),_._v(" "),t("p",[_._v("我们公司有两个开发团队，分别在浙江和山东，我是在浙江。")]),_._v(" "),t("p",[_._v("浙江的测试人员A说他不想测试，他准备离职了，让更熟悉业务的山东测试人员B去测试。")]),_._v(" "),t("p",[_._v("山东的测试人员B也不想测试，说这就应该A去测试。")]),_._v(" "),t("p",[_._v("按照之前分配任务的习惯，应该是B去测试,")]),_._v(" "),t("p",[_._v("但是之前前几天说专人专线的时候，是把经纪商的测试任务交给A的。")]),_._v(" "),t("p",[_._v("两个都不打算测试。")]),_._v(" "),t("p",[_._v("我就向项目经理说明这个情况，说明情况的时候，我是准备发消息的，写到一半，我觉得当面说更好一点。")]),_._v(" "),t("p",[_._v("还好离得比较近，当面说，就不会有其他的想法。")]),_._v(" "),t("p",[_._v("项目经理协调后，让浙江的测试人员C进行测试。")]),_._v(" "),t("p",[_._v("事件告一段落。")]),_._v(" "),t("h2",{attrs:{id:"_4-end"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-end"}},[_._v("#")]),_._v(" 4.End")]),_._v(" "),t("p",[_._v("敲代码是最简单的，人与人之间的相处比它复杂多了。")]),_._v(" "),t("p",[_._v("有什么矛盾尽量当面说，避免产生误会。")]),_._v(" "),t("p",[_._v("总有些问题是无解的，或者说是要妥协的，比如历史遗留问题。")]),_._v(" "),t("p",[_._v("妥协不是退缩，相比于莽干，妥协可能危害更小，风险更小。")])])}),[],!1,null,null,null);v.default=s.exports}}]);