(window.webpackJsonp=window.webpackJsonp||[]).push([[579],{997:function(e,a,t){"use strict";t.r(a);var s=t(14),n=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("这是ArangoDB集合接口的介绍，以及如何从JavaScript shell "),t("em",[e._v("arangosh")]),e._v("处理集合的"),t("em",[e._v("介绍")]),e._v("。对于其他语言，请参见相应的语言API。")]),e._v(" "),t("p",[e._v("最重要的调用是创建新集合的调用。")]),e._v(" "),t("h2",{attrs:{id:"集合地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集合地址"}},[e._v("#")]),e._v(" 集合地址")]),e._v(" "),t("p",[e._v("ArangoDB中的所有集合都具有唯一的标识符和唯一的名称。集合的名称空间与视图共享，因此在同一数据库中不能存在一个集合和一个具有相同名称的视图。ArangoDB在内部使用集合的唯一标识符来查找集合。但是，此标识符由ArangoDB管理，并且用户无法对其进行控制。为了允许用户使用自己的名称，每个集合还具有由用户指定的唯一名称。要从用户角度访问集合， 应使用"),t("a",{attrs:{href:"https://www.arangodb.com/docs/devel/appendix-glossary.html#collection-name",target:"_blank",rel:"noopener noreferrer"}},[e._v("集合名称"),t("OutboundLink")],1),e._v("，即：")]),e._v(" "),t("h3",{attrs:{id:"集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集合"}},[e._v("#")]),e._v(" 集合")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("db._collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("collection-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("集合是通过"),t("a",{attrs:{href:"https://www.arangodb.com/docs/devel/data-modeling-collections-database-methods.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("“ db._create”"),t("OutboundLink")],1),e._v("调用创建的。")]),e._v(" "),t("p",[e._v("例如：假设"),t("a",{attrs:{href:"https://www.arangodb.com/docs/devel/appendix-glossary.html#collection-identifier",target:"_blank",rel:"noopener noreferrer"}},[e._v("集合标识符"),t("OutboundLink")],1),e._v("为"),t("em",[e._v("7254820")]),e._v("，名称为 "),t("em",[e._v("demo")]),e._v("，则可以通过以下方式访问集合：")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("db._collection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"demo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("如果不存在具有该名称的集合，则返回"),t("em",[e._v("null")]),e._v("。")]),e._v(" "),t("p",[e._v("有一个可用于非系统集合的捷径：")]),e._v(" "),t("h3",{attrs:{id:"集合名称"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集合名称"}},[e._v("#")]),e._v(" 集合名称")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("db.collection-name\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("该调用将返回名为"),t("em",[e._v("db.collection-name")]),e._v("的集合，或者使用该名称和一组默认属性创建一个新集合。")]),e._v(" "),t("p",[t("strong",[e._v("注意")]),e._v("：不建议使用"),t("em",[e._v("db.collection-name快速")]),e._v("创建集合，并且在"),t("em",[e._v("arangosh")]),e._v("中"),t("em",[e._v("不起作用")]),e._v("。要创建新收藏集，请使用")]),e._v(" "),t("h3",{attrs:{id:"创建集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建集合"}},[e._v("#")]),e._v(" 创建集合")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("db._create"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("collection-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("该调用将创建一个名为"),t("em",[e._v("collection-name")]),e._v("的新集合。此方法是一种数据库方法，在“"),t("a",{attrs:{href:"https://www.arangodb.com/docs/devel/data-modeling-collections-database-methods.html#create",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据库方法”"),t("OutboundLink")],1),e._v("中有详细记录")]),e._v(" "),t("h3",{attrs:{id:"同步复制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同步复制"}},[e._v("#")]),e._v(" 同步复制")]),e._v(" "),t("p",[e._v("从ArangoDB 3.0开始，分布式版本提供了同步复制，这意味着可以选择在ArangoDB群集中自动复制所有数据。通过在创建集合时指定“复制因子”，为每个集合配置分片集合。复制因子k意味着每个分片的k个副本总共保留在k个不同服务器上的群集中，并且保持同步。即，每个写操作都会自动复制到所有副本上。")]),e._v(" "),t("p",[e._v("这是使用领导者/跟随者模型来组织的。在任何时候，拥有分片副本的服务器之一始终是“领导者”，而所有其他服务器都是“跟随者”，此配置保存在代理机构中（有关ArangoDB集群体系结构的详细信息，请参阅 "),t("a",{attrs:{href:"https://www.arangodb.com/docs/devel/architecture-deployment-modes-cluster.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("集群"),t("OutboundLink")],1),e._v("）。每个写操作均由协调员之一发送给领导者，然后在报告操作成功之前复制到所有跟随者。领导者会记录当前同步的关注者。如果出现网络问题或跟随者失败，领导者可以并且将在3秒后暂时放弃跟随者，以便恢复服务。在适当的时候，关注者将自动与领导者重新同步以恢复弹性。")]),e._v(" "),t("p",[e._v("如果领导者失败，则集群代理机构会在大约15秒后自动启动故障转移例程，从而将一名关注者提升为领导者。其他关注者（以及返回时的前领导者）会自动与新领导者重新同步，以恢复弹性。通常，可以对协调器透明地处理整个故障转移过程，以使用户代码甚至看不到错误消息。")]),e._v(" "),t("p",[e._v("显然，这种容错性是以增加等待时间为代价的。每个写入操作都需要进行额外的网络往返，以同步跟随者，但是到所有跟随者的所有复制操作是同时发生的。这就是为什么默认复制因子为1（这意味着不进行复制）的原因。")]),e._v(" "),t("p",[e._v("有关如何为集合打开同步复制的详细信息，请参阅“数据库方法"),t("code",[e._v("db._create(collection-name)")]),e._v("”部分中的 "),t("a",{attrs:{href:"https://www.arangodb.com/docs/devel/data-modeling-collections-database-methods.html#create",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据库方法"),t("OutboundLink")],1),e._v("。")])])}),[],!1,null,null,null);a.default=n.exports}}]);