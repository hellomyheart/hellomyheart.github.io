(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{499:function(s,n,t){"use strict";t.r(n);var a=t(14),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("在Java程序中，一个线程对象只能调用一次"),t("code",[s._v("start()")]),s._v("方法启动新线程，并在新线程中执行"),t("code",[s._v("run()")]),s._v("方法。一旦"),t("code",[s._v("run()")]),s._v("方法执行完毕，线程就结束了。因此，Java线程的状态有以下几种：")]),s._v(" "),t("ul",[t("li",[s._v("New：新创建的线程，尚未执行；")]),s._v(" "),t("li",[s._v("Runnable：运行中的线程，正在执行"),t("code",[s._v("run()")]),s._v("方法的Java代码；")]),s._v(" "),t("li",[s._v("Blocked：运行中的线程，因为某些操作被阻塞而挂起；")]),s._v(" "),t("li",[s._v("Waiting：运行中的线程，因为某些操作在等待中；")]),s._v(" "),t("li",[s._v("Timed Waiting：运行中的线程，因为执行"),t("code",[s._v("sleep()")]),s._v("方法正在计时等待；")]),s._v(" "),t("li",[s._v("Terminated：线程已终止，因为"),t("code",[s._v("run()")]),s._v("方法执行完毕。")])]),s._v(" "),t("p",[s._v("用一个状态转移图表示如下：")]),s._v(" "),t("div",{staticClass:"language-ascii line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("         ┌─────────────┐\n         │     New     │\n         └─────────────┘\n                │\n                ▼\n┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐\n ┌─────────────┐ ┌─────────────┐\n││  Runnable   │ │   Blocked   ││\n └─────────────┘ └─────────────┘\n│┌─────────────┐ ┌─────────────┐│\n │   Waiting   │ │Timed Waiting│\n│└─────────────┘ └─────────────┘│\n ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─\n                │\n                ▼\n         ┌─────────────┐\n         │ Terminated  │\n         └─────────────┘\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("当线程启动后，它可以在"),t("code",[s._v("Runnable")]),s._v("、"),t("code",[s._v("Blocked")]),s._v("、"),t("code",[s._v("Waiting")]),s._v("和"),t("code",[s._v("Timed Waiting")]),s._v("这几个状态之间切换，直到最后变成"),t("code",[s._v("Terminated")]),s._v("状态，线程终止。")]),s._v(" "),t("p",[s._v("线程终止的原因有：")]),s._v(" "),t("ul",[t("li",[s._v("线程正常终止："),t("code",[s._v("run()")]),s._v("方法执行到"),t("code",[s._v("return")]),s._v("语句返回；")]),s._v(" "),t("li",[s._v("线程意外终止："),t("code",[s._v("run()")]),s._v("方法因为未捕获的异常导致线程终止；")]),s._v(" "),t("li",[s._v("对某个线程的"),t("code",[s._v("Thread")]),s._v("实例调用"),t("code",[s._v("stop()")]),s._v("方法强制终止（强烈不推荐使用）。")])]),s._v(" "),t("p",[s._v("一个线程还可以等待另一个线程直到其运行结束。例如，"),t("code",[s._v("main")]),s._v("线程在启动"),t("code",[s._v("t")]),s._v("线程后，可以通过"),t("code",[s._v("t.join()")]),s._v("等待"),t("code",[s._v("t")]),s._v("线程结束后再继续运行：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InterruptedException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"end"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("blockquote",[t("p",[s._v("运行结果如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("start\nhello\nend\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("p",[s._v("当"),t("code",[s._v("main")]),s._v("线程对线程对象"),t("code",[s._v("t")]),s._v("调用"),t("code",[s._v("join()")]),s._v("方法时，主线程将等待变量"),t("code",[s._v("t")]),s._v("表示的线程运行结束，即"),t("code",[s._v("join")]),s._v("就是指等待该线程结束，然后才继续往下执行自身线程。所以，上述代码打印顺序可以肯定是"),t("code",[s._v("main")]),s._v("线程先打印"),t("code",[s._v("start")]),s._v("，"),t("code",[s._v("t")]),s._v("线程再打印"),t("code",[s._v("hello")]),s._v("，"),t("code",[s._v("main")]),s._v("线程最后再打印"),t("code",[s._v("end")]),s._v("。")]),s._v(" "),t("p",[s._v("如果"),t("code",[s._v("t")]),s._v("线程已经结束，对实例"),t("code",[s._v("t")]),s._v("调用"),t("code",[s._v("join()")]),s._v("会立刻返回。此外，"),t("code",[s._v("join(long)")]),s._v("的重载方法也可以指定一个等待时间，超过等待时间后就不再继续等待。")]),s._v(" "),t("h3",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),t("p",[s._v("Java线程对象"),t("code",[s._v("Thread")]),s._v("的状态包括："),t("code",[s._v("New")]),s._v("、"),t("code",[s._v("Runnable")]),s._v("、"),t("code",[s._v("Blocked")]),s._v("、"),t("code",[s._v("Waiting")]),s._v("、"),t("code",[s._v("Timed Waiting")]),s._v("和"),t("code",[s._v("Terminated")]),s._v("；")]),s._v(" "),t("p",[s._v("通过对另一个线程对象调用"),t("code",[s._v("join()")]),s._v("方法可以等待其执行结束；")]),s._v(" "),t("p",[s._v("可以指定等待时间，超过等待时间线程仍然没有结束就不再等待；")]),s._v(" "),t("p",[s._v("对已经运行结束的线程调用"),t("code",[s._v("join()")]),s._v("方法会立刻返回。")])])}),[],!1,null,null,null);n.default=e.exports}}]);