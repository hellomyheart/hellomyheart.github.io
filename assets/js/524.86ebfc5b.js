(window.webpackJsonp=window.webpackJsonp||[]).push([[524],{944:function(e,n,s){"use strict";s.r(n);var t=s(14),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("在上一个主题中，您能够运行基本扩展。它是如何工作的？")]),e._v(" "),s("p",[e._v("该"),s("code",[e._v("Hello World")]),e._v("扩展程序执行3件事：")]),e._v(" "),s("ul",[s("li",[e._v("注册"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/activation-events",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("激活事件")]),s("OutboundLink")],1),e._v("：，因此，当用户运行命令时，扩展名将被激活。"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/activation-events#onCommand",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("onCommand")]),s("OutboundLink")],1),e._v(" "),s("code",[e._v("onCommand:extension.helloWorld``Hello World")])]),e._v(" "),s("li",[e._v("使用"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/contribution-points",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("贡献点")]),s("OutboundLink")],1),e._v("使命令在命令面板中可用，并将其绑定到命令ID 。"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/contribution-points#contributes.commands",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("contributes.commands")]),s("OutboundLink")],1),e._v(" "),s("code",[e._v("Hello World``extension.helloWorld")])]),e._v(" "),s("li",[e._v("使用"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/vscode-api",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("VS Code API")]),s("OutboundLink")],1),e._v("将功能绑定到已注册的命令ID 。"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/vscode-api#commands.registerCommand",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("commands.registerCommand")]),s("OutboundLink")],1),e._v(" "),s("code",[e._v("extension.helloWorld")])])]),e._v(" "),s("p",[e._v("理解这三个概念对于用VS Code编写扩展至关重要：")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://code.visualstudio.com/api/references/activation-events",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("激活事件")]),s("OutboundLink")],1),e._v("：您的分机"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/activation-events",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("激活时所")]),s("OutboundLink")],1),e._v("发生的事件。")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://code.visualstudio.com/api/references/contribution-points",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("贡献点")]),s("OutboundLink")],1),e._v("：在"),s("code",[e._v("package.json")]),e._v(" "),s("a",{attrs:{href:"https://code.visualstudio.com/api/get-started/extension-anatomy#extension-manifest",target:"_blank",rel:"noopener noreferrer"}},[e._v("扩展清单中"),s("OutboundLink")],1),e._v("为扩展VS Code所做的静态声明。")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://code.visualstudio.com/api/references/vscode-api",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[e._v("VS Code API")]),s("OutboundLink")],1),e._v("：可以在扩展代码中调用的一组JavaScript API。")])]),e._v(" "),s("p",[e._v("通常，您的扩展程序将结合使用贡献点和VS Code API来扩展VS Code的功能。在"),s("a",{attrs:{href:"https://code.visualstudio.com/api/extension-capabilities/overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("扩展功能概述"),s("OutboundLink")],1),e._v("主题帮助您找到合适的贡献分和VS代码API为您的扩展。")]),e._v(" "),s("p",[e._v("让我们仔细看一下"),s("code",[e._v("Hello World")]),e._v("示例的源代码，看看这些概念如何应用于它。")]),e._v(" "),s("h2",{attrs:{id:"扩展文件结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展文件结构"}},[e._v("#")]),e._v(" 扩展文件结构")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(".\n├── .vscode\n│   ├── launch.json     // 项目启动配置\n│   └── tasks.json      // 构建任务\n├── .gitignore          // git忽略清单文件\n├── README.md           // 描述性文件\n├── src\n│   └── extension.ts    // 扩展插件源代码\n├── package.json        // 扩展清单\n├── tsconfig.json       // TypeScript配置\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[e._v("您可以阅读有关配置文件的更多信息：")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("launch.json")]),e._v("用于配置VS代码"),s("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/debugging",target:"_blank",rel:"noopener noreferrer"}},[e._v("调试"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("code",[e._v("tasks.json")]),e._v("用于定义VS代码"),s("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/tasks",target:"_blank",rel:"noopener noreferrer"}},[e._v("任务"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("code",[e._v("tsconfig.json")]),e._v("查阅《 TypeScript"),s("a",{attrs:{href:"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("手册》"),s("OutboundLink")],1)])]),e._v(" "),s("p",[e._v("但是，让我们专注于"),s("code",[e._v("package.json")]),e._v("和"),s("code",[e._v("extension.ts")]),e._v("，这对于理解"),s("code",[e._v("Hello World")]),e._v("扩展至关重要。")]),e._v(" "),s("h3",{attrs:{id:"扩展清单"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展清单"}},[e._v("#")]),e._v(" 扩展清单")]),e._v(" "),s("p",[e._v("每个VS Code扩展名必须有一个"),s("code",[e._v("package.json")]),e._v("作为其"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/extension-manifest",target:"_blank",rel:"noopener noreferrer"}},[e._v("扩展名清单"),s("OutboundLink")],1),e._v("。该"),s("code",[e._v("package.json")]),e._v("包含的Node.js的混合领域，如"),s("code",[e._v("scripts")]),e._v("与"),s("code",[e._v("dependencies")]),e._v("和VS代码的特定领域，如"),s("code",[e._v("publisher")]),e._v("，"),s("code",[e._v("activationEvents")]),e._v("和"),s("code",[e._v("contributes")]),e._v("。您可以在"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/extension-manifest",target:"_blank",rel:"noopener noreferrer"}},[e._v("Extension Manifest Reference中"),s("OutboundLink")],1),e._v("找到所有VS Code特定字段的描述。以下是一些最重要的字段：")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("name")]),e._v("和"),s("code",[e._v("publisher")]),e._v("：VS Code"),s("code",[e._v("<publisher>.<name>")]),e._v("用作扩展名的唯一ID。例如，Hello World示例的ID为"),s("code",[e._v("vscode-samples.helloworld-sample")]),e._v("。VS Code使用该ID来唯一标识您的扩展名")]),e._v(" "),s("li",[s("code",[e._v("main")]),e._v("：扩展入口点。")]),e._v(" "),s("li",[s("code",[e._v("activationEvents")]),e._v("以及"),s("code",[e._v("contributes")]),e._v("："),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/activation-events",target:"_blank",rel:"noopener noreferrer"}},[e._v("激活事件"),s("OutboundLink")],1),e._v("和"),s("a",{attrs:{href:"https://code.visualstudio.com/api/references/contribution-points",target:"_blank",rel:"noopener noreferrer"}},[e._v("贡献点"),s("OutboundLink")],1),e._v("。")]),e._v(" "),s("li",[s("code",[e._v("engines.vscode")]),e._v("：这指定了扩展所依赖的VS Code API的最低版本。")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n  "name": "helloworld-sample",\n  "displayName": "helloworld-sample",\n  "description": "HelloWorld example for VS Code",\n  "version": "0.0.1",\n  "publisher": "vscode-samples",\n  "repository": "https://github.com/microsoft/vscode-extension-samples/helloworld-sample",\n  "engines": {\n    "vscode": "^1.51.0"\n  },\n  "categories": ["Other"],\n  "activationEvents": ["onCommand:extension.helloWorld"],\n  "main": "./out/extension.js",\n  "contributes": {\n    "commands": [\n      {\n        "command": "extension.helloWorld",\n        "title": "Hello World"\n      }\n    ]\n  },\n  "scripts": {\n    "vscode:prepublish": "npm run compile",\n    "compile": "tsc -p ./",\n    "watch": "tsc -watch -p ./"\n  },\n  "devDependencies": {\n    "@types/node": "^8.10.25",\n    "@types/vscode": "^1.51.0",\n    "tslint": "^5.16.0",\n    "typescript": "^3.4.5"\n  }\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br")])]),s("h2",{attrs:{id:"扩展条目文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展条目文件"}},[e._v("#")]),e._v(" 扩展条目文件")]),e._v(" "),s("p",[e._v("扩展条目文件导出两个功能，"),s("code",[e._v("activate")]),e._v("和"),s("code",[e._v("deactivate")]),e._v("。"),s("code",[e._v("activate")]),e._v("在您注册的"),s("strong",[e._v("激活事件")]),e._v("发生时执行。"),s("code",[e._v("deactivate")]),e._v("让您有机会在停用扩展程序之前进行清理。对于许多扩展，可能不需要显式清除，并且"),s("code",[e._v("deactivate")]),e._v("可以删除该方法。但是，如果在VS Code关闭或扩展被禁用或卸载时扩展需要执行操作，则可以使用这种方法。")]),e._v(" "),s("p",[e._v("VS Code扩展API在"),s("a",{attrs:{href:"https://www.npmjs.com/package/@types/vscode",target:"_blank",rel:"noopener noreferrer"}},[e._v("@ types / vscode"),s("OutboundLink")],1),e._v("类型定义中声明。"),s("code",[e._v("vscode")]),e._v("类型定义的版本由中的"),s("code",[e._v("engines.vscode")]),e._v("字段中的值控制"),s("code",[e._v("package.json")]),e._v("。这些"),s("code",[e._v("vscode")]),e._v("类型在代码中为您提供IntelliSense，转到定义和其他TypeScript语言功能。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport * as vscode from 'vscode';\n\n// this method is called when your extension is activated\n// your extension is activated the very first time the command is executed\nexport function activate(context: vscode.ExtensionContext) {\n  // Use the console to output diagnostic information (console.log) and errors (console.error)\n  // This line of code will only be executed once when your extension is activated\n  console.log('Congratulations, your extension \"helloworld-sample\" is now active!');\n\n  // The command has been defined in the package.json file\n  // Now provide the implementation of the command with registerCommand\n  // The commandId parameter must match the command field in package.json\n  let disposable = vscode.commands.registerCommand('extension.helloWorld', () => {\n    // The code you place here will be executed every time your command is executed\n\n    // Display a message box to the user\n    vscode.window.showInformationMessage('Hello World!');\n  });\n\n  context.subscriptions.push(disposable);\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() {}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);